{% extends "base_content.html" %}

{% block content %}
<div class="container my-4">
    <h2>Edit Lesson</h2>
    <p>You can edit the details of this lesson below. Note that the Tutor and Student fields are read-only.</p>

    <!-- Display Success and Error Messages -->
    {% if messages %}
    <ul class="messages">
        {% for message in messages %}
        <li class="alert {{ message.tags }}">{{ message }}</li>
        {% endfor %}
    </ul>
    {% endif %}

    <form method="post">
        {% csrf_token %}
        
        <!-- Subject -->
        <div class="mb-3">
            <label for="id_subject" class="form-label"><strong>Subject:</strong></label>
            {{ form.subject.errors }}
            {{ form.subject }}
        </div>

        <!-- Day of the Week -->
        <div class="mb-3">
            <label for="id_day_of_week" class="form-label"><strong>Day of Week:</strong></label>
            {{ form.day_of_week.errors }}
            {{ form.day_of_week }}
        </div>

        <!-- Start Time -->
        <div class="mb-3">
            <label for="id_start_time" class="form-label"><strong>Start Time:</strong></label>
            {{ form.start_time.errors }}
            {{ form.start_time }}
        </div>

        <!-- Duration -->
        <div class="mb-3">
            <label for="id_duration" class="form-label"><strong>Duration (minutes):</strong></label>
            {{ form.duration.errors }}
            {{ form.duration }}
        </div>

        <!-- Frequency -->
        <div class="mb-3">
            <label for="id_frequency" class="form-label"><strong>Frequency:</strong></label>
            {{ form.frequency.errors }}
            {{ form.frequency }}
        </div>

        <!-- Status -->
        <div class="mb-3">
            <label for="id_status" class="form-label"><strong>Status:</strong></label>
            {{ form.status.errors }}
            {{ form.status }}
        </div>

        <!-- Submit and Cancel Buttons -->
        <div class="mt-3">
            <button type="submit" class="btn btn-primary">Save Changes</button>
            <a href="{% url 'admin_dashboard' %}" class="btn btn-secondary">Cancel</a>
        </div>
    </form>

    <!-- Form-Level Errors -->
    {% if form.errors %}
    <div class="alert alert-danger mt-3">
        <strong>Please correct the errors below:</strong>
        <ul>
            {% for field, errors in form.errors.items %}
            <li><strong>{{ field|capfirst }}:</strong> {{ errors|join:", " }}</li>
            {% endfor %}
        </ul>
    </div>
    {% endif %}
</div>
{% endblock %}
